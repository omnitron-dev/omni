–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∏ –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å–ª–∞–±—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –º–µ—Å—Ç —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, —Å —á—ë—Ç–∫–∏–º–∏ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—é.

---

## üîç **–°–ª–∞–±—ã–µ –º–µ—Å—Ç–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

### 1. üî¥ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞–¥—ë–∂–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ Lua-—Å–∫—Ä–∏–ø—Ç–æ–≤**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
```ts
await this.runLuaScript(...);
```
–û—à–∏–±–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –Ω–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ –æ—Ç–∫–∞–∑–∞—Ö Redis –∏–ª–∏ –ø—Ä–∏ —Å–±–æ—è—Ö —Å–µ—Ç–∏.

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å retry-–º–µ—Ö–∞–Ω–∏–∑–º** —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π.
- –î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –¥–æ–±–∞–≤–∏—Ç—å Circuit Breaker.

---

### 2. üî¥ **–ù–µ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
```ts
this.config.checkDelayInterval ?? 1000
```

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –≤—Ä–æ–¥–µ **Zod** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Ä–∞–Ω–Ω–∏–π –∏ —è–≤–Ω—ã–π —Ñ–∏–¥–±–µ–∫ –æ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö.

---

### 3. üî¥ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥—Ä–∞–Ω–∏—Ü Batch-size**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Batch-size –ø—Ä–∏ –≤—ã–∑–æ–≤–µ Lua-—Å–∫—Ä–∏–ø—Ç–æ–≤.
```ts
String(this.config.scheduledBatchSize ?? 1000)
```

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –Ø–≤–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –±–æ–ª–µ–µ 5000 –∑–∞–ø–∏—Å–µ–π), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ Redis –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤:
```ts
const batchSize = Math.min(this.config.scheduledBatchSize ?? 1000, 5000);
```

---

### 4. üî¥ **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö DLQ –∏ retry –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏, –Ω–æ –Ω–µ—Ç —Å—Ç–µ–∫—Ç—Ä–µ–π—Å–∞.
```ts
(err as Error).message || 'unknown'
```

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–µ–∫—Ç—Ä–µ–π—Å, timestamp –æ—à–∏–±–∫–∏ –∏ ID —Å–æ–æ–±—â–µ–Ω–∏—è:
```ts
{
  errorMessage: err.message,
  stack: err.stack,
  msgId: msg.id,
  timestamp: Date.now()
}
```

---

### 5. üî¥ **–ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
```ts
this.logger.info(`Duplicate message detected: ${dedupKey}`);
```

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ —Å –∫–ª—é—á–∞–º–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:
```ts
this.logger.info('Duplicate message detected', { dedupKey, channel, group });
```

---

### 6. üî¥ **–ñ—ë—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ Consumer-–æ–≤ DLQ**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
```ts
const consumer = 'dlq-worker';
```

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–º–µ–Ω–∞ –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤:
```ts
const consumer = this.config.dlqConsumerNameFn?.() || defaultConsumerName();
```

---

### 7. üî¥ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á—ë—Ç–∫–∏—Ö —Ç–∏–ø–æ–≤ payload**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
```ts
payload: any
```

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å generic-—Ç–∏–ø—ã –∏ –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é –¥–ª—è payload'–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```ts
publish<TPayload>(channel: string, payload: TPayload): Promise<...>
```

---

### 8. üî¥ **–ù–µ—è–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Deduplication TTL**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- TTL –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –Ω–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```ts
deduplicationTTL ?? 3600
```

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –°–¥–µ–ª–∞—Ç—å TTL —è–≤–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º publish-–º–µ—Ç–æ–¥–∞ —Å –¥–µ—Ñ–æ–ª—Ç–æ–º –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```ts
deduplicationTTL: options?.deduplicationTTL ?? this.config.defaultDeduplicationTTL ?? 3600
```

---

### 9. üî¥ **Round-Robin: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–æ—Å–∞ –Ω–∞–≥—Ä—É–∑–∫–∏**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- Round-Robin –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É handler'–∞–º–∏ –≤ –≥—Ä—É–ø–ø–µ:
```ts
this.getRoundRobinIndex(stream, group, matchingSubs.length);
```

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —É–º–Ω—ã–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞–¥–µ—Ä–∂–µ–∫, –æ—à–∏–±–æ–∫ –∏ —Ç–µ–∫—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ handler'–æ–≤).

---

### 10. üî¥ **–£—è–∑–≤–∏–º–æ—Å—Ç—å –∫ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—é dedup-–∫–ª—é—á–µ–π**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–µ–∑–ª–∏–º–∏—Ç–Ω—ã—Ö Dedup-–∫–ª—é—á–µ–π –≤ Redis:
```ts
await this.redis.set(dedupKey, '1', 'EX', dedupTTL ? Number(dedupTTL) : 3600);
```

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å namespaces –¥–ª—è –∫–ª—é—á–µ–π.
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä dedup-–∫–µ—à–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis eviction policy –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—É—é cleanup-–¥–∂–æ–±—É).

---

### 11. üî¥ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Health Check –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –∏ health-check —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è manager (Redis-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥—è—Ö, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∏ –æ—à–∏–±–æ–∫).

---

### 12. üî¥ **–†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Redis-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è —è–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é:
```ts
if (this.redis.status !== 'end') {
  await this.redis.quit();
}
```

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –í–Ω–µ–¥—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ lifecycle —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Redlock` –∏–ª–∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—É—é —Ñ–∞–±—Ä–∏–∫—É –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º).

---

### 13. üî¥ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è Lua SHA**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –°–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å—Ç–∞—Ä—Ç–µ –±–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è SHA –≤–Ω–µ Redis.

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è SHA-—Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Å–ª—É—á–∞–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏–ª–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

---

### 14. üî¥ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Circuit Breaker –∏–ª–∏ Rate Limiter**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫ –∏ —Ñ–ª–∞–¥–æ–≤.

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º—ã Circuit Breaker (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `opossum`) –∏ Rate Limiter (—á–µ—Ä–µ–∑ Redis –Ω–∞ Lua-—Å–∫—Ä–∏–ø—Ç–∞—Ö).

---

### 15. üî¥ **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ Retry –∏ DLQ**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –∫–æ–¥ retry –∏ DLQ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `handleRetryOrDLQ(msg, err, attempt, maxRetries)`.

---

### 16. üî¥ **–ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Graceful Shutdown**

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `stopAll()` –Ω–µ –∂–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ–∫—É—â–∏—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π —è–≤–Ω–æ.

#### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ–∫—É—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –æ–±—Ä–∞–±–æ—Ç–æ–∫ (`await Promise.allSettled([...])`).

---

## üìã **–¢–æ–ø-5 —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º:**

1. ‚úÖ **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è retry-—Å—Ç—Ä–∞—Ç–µ–≥–∏–π –∏ Circuit Breaker**.
2. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**.
3. ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)**.
4. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ Health Check –∏ –º–µ—Ç—Ä–∏–∫**.
5. ‚úÖ **Graceful Shutdown**.

---

## üö© **–í—ã–≤–æ–¥:**
–¢–≤–æ–π —Ç–µ–∫—É—â–∏–π –∫–æ–¥ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç –∏ –Ω–∞–¥—ë–∂–Ω–æ —Ä–µ—à–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞–¥–∞—á, –æ–¥–Ω–∞–∫–æ –æ–Ω –∏–º–µ–µ—Ç –æ–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–ª–∞–±—ã–µ –º–µ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å—Ç–æ–∏—Ç —É—Å—Ç—Ä–∞–Ω–∏—Ç—å, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞. 

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ –≤–Ω–µ–¥—Ä—è—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –≤—ã—à–µ —É–ª—É—á—à–µ–Ω–∏—è, —á—Ç–æ–±—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ.